# 구글 지도 XYZ 타일 사용 가이드

구글 지도의 XYZ 타일을 사용하여 종이 지도 느낌의 배경을 표시할 수 있습니다.

## 구글 지도 타일 URL 형식

구글 지도는 다음 형식의 XYZ 타일을 제공합니다:

```
https://mt{s}.google.com/vt/lyrs={style}&x={x}&y={y}&z={z}
```

### 지도 스타일 옵션

- `lyrs=m`: **일반 지도** (Map) - 종이 지도 느낌 ⭐ 권장
- `lyrs=t`: 지형도 (Terrain)
- `lyrs=s`: 위성 지도 (Satellite)
- `lyrs=y`: 하이브리드 (Hybrid - 위성 + 도로명)

### 서브도메인

`{s}` 부분은 `0`, `1`, `2`, `3` 중 하나로 자동 선택됩니다. (로드 밸런싱)

## 내부망 환경에서의 사용

### 가능한 경우

내부망에서 구글 지도 타일 서버(`mt0.google.com`, `mt1.google.com` 등)에 접근할 수 있다면:
- ✅ 자동으로 구글 지도 타일이 로드됩니다
- ✅ 종이 지도 느낌의 배경이 표시됩니다
- ✅ 추가 설정 불필요

### 불가능한 경우

내부망에서 구글 지도 타일 서버에 접근할 수 없다면:
- ⚠️ 타일 로드 실패 메시지가 표시됩니다
- ⚠️ 자동으로 로컬 타일 또는 배경 이미지로 전환됩니다
- 💡 해결 방법: 로컬 타일을 다운로드하거나 배경 이미지를 사용하세요

## 지도 스타일 변경

코드에 지도 스타일 선택 기능이 포함되어 있습니다 (현재는 숨김 처리).

스타일을 변경하려면:
1. `gis.html` 파일에서 `.map-style-selector`의 `display: none;`을 `display: block;`으로 변경
2. 또는 브라우저 콘솔에서 `changeMapStyle('m')` 함수 호출

## 타일 캐싱 (선택사항)

내부망 환경에서 성능을 향상시키려면:

1. **프록시 서버 사용**: 구글 지도 타일을 프록시를 통해 캐싱
2. **로컬 타일 다운로드**: 필요한 지역의 타일을 미리 다운로드하여 로컬에 저장

## 주의사항

- 구글 지도 타일 사용 시 구글의 이용약관을 준수해야 합니다
- 상업적 용도로 사용하는 경우 구글 지도 API 라이선스를 확인하세요
- 내부망에서 구글 서버에 접근할 수 없는 경우 대체 방법을 사용해야 합니다

## 현재 설정

현재 코드는 다음 순서로 타일을 시도합니다:

1. **구글 지도 타일** (일반 지도 - 종이 지도 느낌)
2. **로컬 타일** (`lib/leaflet/tiles/{z}/{x}/{y}.png`)
3. **배경 이미지** (`images/world-map-background.png`)
4. **그리드 배경** (최후의 수단)

## 확인 방법

브라우저 개발자 도구(F12)에서:
- **Console 탭**: 타일 로드 상태 메시지 확인
- **Network 탭**: `mt0.google.com` 또는 `mt1.google.com` 요청 확인
  - 성공: 200 OK 응답
  - 실패: CORS 오류 또는 타임아웃

